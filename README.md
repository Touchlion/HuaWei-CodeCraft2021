# HuaWei-CodeCraft2021
 2021华为软件精英挑战赛粤港澳赛区复赛第六
### 赛题解析
云上资源的规划和调度问题，来源于华为云运营过程中的实际场景。
华为云向用户提供了`1000种不同规格的虚拟机`可以选购，每天华为云会需要处理许多`用户请求`，一条请求可能是`创建`一台某种机型的虚拟机，也可能是`删除`某台指定的虚拟机。赛题就是要选手的程序做出决策，处理这些请求。
虚拟机是部署在服务器上的，部署需要满足`容量约束`。对华为云来说，如果已有的服务器资源不能满足用户需求时，可以进行`扩容`，就是购买更多服务器。有`100种不同规格的服务器`可以选购。
在处理一天的用户需求之前，华为云还可以对虚拟机进行`迁移整理`，比如一台虚拟机本来是部署在这个服务器上，可以在满足约束的前提下将其移动到另一台服务器上。
#### 选手程序需要做的事情
把自己当成运营商，对每天的用户请求序列，先`决策需要购买哪些服务器`，再`决策要如何对已有虚拟机进行迁移整理`，然后对这一天的每个用户创建请求，`决策将虚拟机部署在哪台服务器上`。
#### 优化目标
每种规格的服务器都有两个成本：购买时需要支付的`硬件成本`，以及开机一天需要付出的`能耗成本`。如果一台服务器某天没有部署虚拟机，则不算开机。`目标就是最小化总成本`。
___
### 总体思路
① 迁移策略：每天可以进行的迁移次数有上限，尽可能多地使用次数。迁移的目标是把一些负载较小，但电费又比较高的服务器搬空，从而节约能源成本。每次迁移都找一对合适的源服务器和目的服务器，把源服务器上的一个虚拟机搬到目的服务器上，这样就进行了一次迁移。
② 部署策略：对一个创建虚拟机的请求，先在已有的服务器资源中，尝试找一台合适的服务器，部署到它上面，只有实在装不下的时候才购买新的服务器。
③ 购买策略：当出现一个创建虚拟机请求无法被满足时，在所有能装得下这台虚拟机的服务器中，综合考虑它的规格，硬件成本，能耗成本，剩余需要处理的天数等，决定购买哪一台服务器，并直接将虚拟机部署到上面。
